"use strict";var app=app||{};app.PlayerView=Backbone.View.extend({initialize:function(){this.render()},render:function(){return this.$el.html(TmpEngine.render("player",{phrase:"Hello!!!"})),this.afterRendering(),this},afterRendering:function(){this.initTimeline(),this.initVolumeControl(),this.initPlaylistScroll(),this.initFileReader()},initTimeline:function(){this.$(".timeline").slider({range:"min",min:0,max:100})},initVolumeControl:function(){this.$(".volume").slider({range:"min",min:0,max:100,value:20,slide:function(i,e){}})},initPlaylistScroll:function(){this.$("."+CLASS_PREFIX+"-playlist").mCustomScrollbar({theme:"minimal-dark",scrollInertia:0})},initFileReader:function(){FileCollector.init("#"+PLAYER_ID+" #dropzone")}});var PLAYER_ID="webAudioPlayer",CLASS_PREFIX="wap",TmpEngine=function(){var i={playerID:PLAYER_ID,classPrefix:CLASS_PREFIX},e=function(i,e){return e=e||{},n[i]?n[i](e):void 0},n={player:function(e){return'<div id="'+i.playerID+'">                            <div class="'+i.classPrefix+'-audiobox">                                <audio></audio>                            </div>                            <div class="'+i.classPrefix+'-playlist">                                 <ul class="'+i.classPrefix+'-tracker">                                    <li id="dropzone">                                        <span>Drop files here <br>or click to add in playlist.</span>                                    </li>                                 </ul>                            </div>                        </div>'},track:function(i){return'<li>                          <span class="track-name">We’ll be coming back</span>                          <span class="track-duration">3:55</span>                        </li>'},information:function(e){return'<div class="'+i.classPrefix+'-album-cover">                            <img class="cover-image active" src="https://upload.wikimedia.org/wikipedia/en/d/df/Calvin_Harris_-_18_Months.png" alt="Calvin_Harris_-_18_Months" />                        </div>                        <div class="track-name">We’ll be coming back</div>                        <div class="'+i.classPrefix+'-author">Calvin Harris</div>                        <div class="'+i.classPrefix+'-album-name">18 months</div>'}};return{render:e}}(),FileCollector=function(i){var e={drugAndDrop:!0,fileInput:'<input type="file" name="files[]" multiple>'},n=[],a=!1,r=!1,t=function(n){a=i(n),a.append(e.fileInput),r=a.find('input[type="file"]'),a.on("click",l.clickOnContainer),r.on("change",l.changeOfFileInput),e.drugAndDrop&&(a.on("dragover",l.dragOver),a.on("drop",l.drop),a.on("dragenter",l.drugEnter),a.on("dragleave",l.drugLeave))},l={clickOnContainer:function(){r.on("click",function(i){i.stopPropagation()}).trigger("click")},changeOfFileInput:function(i){var e=i.target.files;o(e)},drop:function(i){i.stopPropagation(),i.preventDefault();var e=i.originalEvent.dataTransfer.files;a.removeClass("drag-active"),o(e)},dragOver:function(i){i.stopPropagation(),i.preventDefault(),i.originalEvent.dataTransfer.dropEffect="copy"},drugEnter:function(){a.addClass("drag-active")},drugLeave:function(){a.removeClass("drag-active")}},o=function(e){i.each(e,function(i,e){var a={file:e,progressTotal:0,progressDone:0,element:null,valid:!1};a.valid=("image/png"==e.type||"image/jpeg"==e.type||"image/jpg"==e.type)&&e.size/1024/1024<2,n.unshift(a),console.log(n)})};return{init:t}}(jQuery);