"use strict";var app=app||{};app.PlayerView=Backbone.View.extend({initialize:function(){this.render()},render:function(){return this.$el.html(TmpEngine.render("player",{phrase:"Hello!!!"})),this.afterRendering(),this},afterRendering:function(){this.initTimeline(),this.initVolumeControl(),this.initPlaylistScroll(),this.initFileReader()},initTimeline:function(){this.$(".timeline").slider({range:"min",min:0,max:100})},initVolumeControl:function(){this.$(".volume").slider({range:"min",min:0,max:100,value:20,slide:function(i,n){}})},initPlaylistScroll:function(){this.$("."+CLASS_PREFIX+"-playlist").mCustomScrollbar({theme:"minimal-dark",scrollInertia:0})},initFileReader:function(){FileCollector.init("#"+PLAYER_ID+" #dropzone",function(i){console.log(i)})}});var PLAYER_ID="webAudioPlayer",CLASS_PREFIX="wap",TmpEngine=function(){var i={playerID:PLAYER_ID,classPrefix:CLASS_PREFIX},n=function(i,n){return n=n||{},e[i]?e[i](n):void 0},e={player:function(n){return'<div id="'+i.playerID+'">                            <div class="'+i.classPrefix+'-audiobox">                                <audio></audio>                            </div>                            <div class="'+i.classPrefix+'-playlist">                                 <ul class="'+i.classPrefix+'-tracker">                                    <li id="dropzone">                                        <span>Drop files(mp3, wav) here <br>or click to load on server.</span>                                    </li>                                 </ul>                            </div>                        </div>'},track:function(i){return'<li>                          <span class="track-name">We’ll be coming back</span>                          <span class="track-duration">3:55</span>                        </li>'},information:function(n){return'<div class="'+i.classPrefix+'-album-cover">                            <img class="cover-image active" src="https://upload.wikimedia.org/wikipedia/en/d/df/Calvin_Harris_-_18_Months.png" alt="Calvin_Harris_-_18_Months" />                        </div>                        <div class="track-name">We’ll be coming back</div>                        <div class="'+i.classPrefix+'-author">Calvin Harris</div>                        <div class="'+i.classPrefix+'-album-name">18 months</div>'}};return{render:n}}(),FileCollector=function(i){var n={drugAndDrop:!0,fileMimeTypes:["audio/mp3","audio/mpeg","audio/vnd.wave"],fileInput:'<input type="file" name="files[]" multiple>'},e=!1,a=!1,r=!1,t=function(t,o){e=i(t),e.append(n.fileInput),a=e.find('input[type="file"]'),r=o,e.on("click",l.clickOnContainer),a.on("change",l.changeOfFileInput),n.drugAndDrop&&(e.on("dragover",l.dragOver),e.on("drop",l.drop),e.on("dragenter",l.drugEnter),e.on("dragleave",l.drugLeave))},l={clickOnContainer:function(){a.on("click",function(i){i.stopPropagation()}).trigger("click")},changeOfFileInput:function(i){var n=i.target.files;o(n)},drop:function(i){i.stopPropagation(),i.preventDefault();var n=i.originalEvent.dataTransfer.files;e.removeClass("drag-active"),o(n)},dragOver:function(i){i.stopPropagation(),i.preventDefault(),i.originalEvent.dataTransfer.dropEffect="copy"},drugEnter:function(){e.addClass("drag-active")},drugLeave:function(){e.removeClass("drag-active")}},o=function(e){var a=[];i.each(e,function(e,r){var t={file:r,progressTotal:0,progressDone:0,valid:!1};i.each(n.fileMimeTypes,function(i,n){r.type==n&&a.unshift(t)})}),r(a)};return{init:t}}(jQuery);